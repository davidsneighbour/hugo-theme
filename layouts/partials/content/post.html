{{- $context := .context }}
{{- $posttype := "default" -}}

{{- with $context.Params.posttype -}}
  {{- if templates.Exists ( printf "partials/content/type/%s.html" . ) -}}
    {{- $posttype = . -}}
  {{- end -}}
{{- end -}}
{{- if eq $context.Type "tags" -}}
  {{- $posttype = "tag" -}}
{{- end -}}

{{- /* FIXME: this should be cached, maybe with cachekey ID+posttype */ -}}
{{- partial (printf "content/type/%s.html" $posttype) . -}}
